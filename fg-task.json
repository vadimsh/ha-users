{
  "containerDefinitions": [
    {
      "name": "ha-users-container",
      "image": "434946005067.dkr.ecr.us-east-1.amazonaws.com/ha-users-repo:latest",
      "portMappings": [
                {
                    "containerPort": 3000, 
                    "protocol": "tcp"
                }
            ], 
        "logConfiguration": {
        "logDriver": "awslogs",
        "options": {
          "awslogs-group": "/ecs/ha-users",
          "awslogs-region": "us-east-1",
          "awslogs-stream-prefix": "ecs"
        }
      },
      
      "essential": true

    },
	    {
      "name": "postgres-container",
      "image": "434946005067.dkr.ecr.us-east-1.amazonaws.com/ha-postgres-repo:latest",
      "portMappings": [
                {
                    "containerPort": 5432, 
                    "protocol": "tcp"
                }
            ], 
        "logConfiguration": {
        "logDriver": "awslogs",
        "options": {
          "awslogs-group": "/ecs/ha-postgres",
          "awslogs-region": "us-east-1",
          "awslogs-stream-prefix": "ecs"
        }
      },
	  "environment" : [
    { "name" : "POSTGRES_DB", "value" : "pgdb" },
    { "name" : "POSTGRES_PASSWORD", "value" : "pgpassword" },
	{ "name" : "POSTGRES_USER", "value" : "pguser" }
]
      

    }
  ],
  "requiresCompatibilities": [
        "FARGATE"
    ], 
   "family": "ha-users-task1",
   "networkMode": "awsvpc",

   "cpu": "256", 
   "memory": "512",
   "executionRoleArn": "arn:aws:iam::434946005067:role/ecsTaskExecutionRole"
  
}
